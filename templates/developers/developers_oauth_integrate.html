{% extends "developers/developers.html" %}
{% block Styles %}
    <link href="/assets/css/endpoints.css" type="text/css" rel="stylesheet">
    <title>Haggle Platforms | Developers / Docs</title>
{% endblock %}
{% block SidebarList %}
    <li class="active"><a href="#oauth">OAuth 2.0</a></li>
    <li><a href="#connecting">Connecting to Haggle</a></li>
    <li><a href="#oauth_endpoints">OAuth Endpoints</a></li>
    <li><a href="#rate_limits">Rate Limits</a></li>
{% endblock %}
{% block DevelopersContent %}
    <div class="tab-pane active fade in" id="oauth">
        <p>Haggle API uses <a href='http://oauth.net/2/'>OAuth 2.0</a>. Here is some information about OAuth.</p>
        <div style="width:600px;height:400px">
            <img src="/assets/img/documentation/OAuth2.svg">
        </div>
        <p>
            <b>OAuth 2.0 involves three main entities :</b>
        </p>
        <ul>
            <li>The client needs to access a protected resource.</li>
            <li>The resource (server hosting the resource) and the resource owner who controls access to the resource.</li>
            <li>The authorization entity.</li>
        </ul>
        <br>
        <p><b>The 'abstract protocol flow' as per the OAuth 2.0 spec suggests the following steps :</b></p>
        <ul>
            <li>The client requests the resource owner to grant authorization to some resources that the owner controls.</li>
            <li>The resource owner issues an authorization grant to the client.</li>
            <li>The client authenticates with the authorization server and presents the authorization grant, requesting for an access token.</li>
            <li>The authorization server verifies the client and the authorization grant and issues an access token.</li>
            <li>The client then authenticates with the resource server by presenting the access token and requests for protected resources.</li>
            <li>The resource server on validating the access token, provides the client with the requested protected resources.</li>
        </ul>
        <div class="pages"></div>
    </div>
    <div class="tab-pane fade" id="connecting">
        <p>Connecting to Haggle is simple and easy. Just <a href="http://haggle-dev.appspot.com/developers/my_apps">sign up</a> with our api to obtain a client ID and secret. Using this, you can connect using them as parameters. Here is an example:(this is where I'll put an example)</p>
        <br>
        <ul>
            <li>The client intending to access protected Haggle resources registers with Haggle.</li>
            <li>Haggle issues a Client ID and Client Secret.</li>
            <li>The client uses the client ID and Client Secret to send an authorization request.</li>
            <li>Haggle authenticates the client, grants the authorization request and returns a authorization code.</li>
            <li>The client sends the client ID and secret along with the authorization code to request for an access token from Haggle.</li>
            <li>Haggle authenticates the client, validates the authorization code and returns an access token.</li>
        </ul>
    </div>
    <div class="tab-pane fade" id="oauth_endpoints">
        <h2>OAuth Endpoints</h2>
        <p>Third parties can connect to Haggle using these endpoints:</p>
        <table cellpadding="0" cellspacing="0" class="table table-striped table-bordered" style="background-color: #f0f0f0">
            <tr>
                <td></td>
                <td>Description</td>
                <td>Parameters</td>
                <td>Response</td>
            </tr>
            <tr>
                <td><a href="https://haggle-test1.appspot.com/clients">/clients</a></td>
                <td>To register an App with Haggle and obtain a Client ID and Secret.</td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td><a href="https://haggle-test1.appspot.com/oauth2/authorize">/oauth2/authorize</a></td>
                <td>To make an authorization request for a user.</td>
                <td>
                    <ul>
                        <li>client_id</li>
                        <li>client_secret</li>
                        <li>response (code/token)</li>
                        <li>redirect_uri (optional)</li>
                    </ul>
                </td>
                <td>code</td>
            </tr>
            <tr>
                <td><a href="https://haggle-test1.appspot.com/oauth2/token">/oauth2/token</a></td>
                <td>To obtain an Access Token for the authorized user.</td>
                <td>
                    <ul>
                        <li>client_id</li>
                        <li>client_secret</li>
                        <li>code</li>
                        <li>redirect_uri (optional)</li>
                    </ul>
                </td>
                <td>access_token</td>
            </tr>
        </table>
    </div>
    <div class="tab-pane fade" id="rate_limits">
        <h2>Rate Limits</h2>
        <p>An application can make 500 requests per access token per 15 minutes rolling window to the Haggle API. For the current usage information, look at the following HTTP response headers:</p>
        <br>
        <ul>
            <li>RateLimit-Remaining - This header gives the number of calls remaining in the current time window.</li>
            <li>RateLimit-ResetTime - Once the limit is reached, this header gives the time (in minutes) to wait before making another call.</li>
        </ul>
    </div>
{% endblock %}
